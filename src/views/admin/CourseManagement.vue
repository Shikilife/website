<template>
  <div class="p3-card w-full">

    <!-- ğŸ” æœå°‹åˆ— -->
    <div class="p3-search-row">
      <div class="p3-search-label">æŸ¥è©¢èª²ç¨‹</div>

      <input
        v-model="searchText"
        class="p3-input"
        placeholder="è«‹è¼¸å…¥èª²ç¨‹åç¨±"
        @keydown.enter="search"
      />

      <button class="p3-btn p3-btn-primary" @click="search">
        æœå°‹
      </button>
    </div>

    <!-- â• æ–°å¢ -->
    <div class="p3-actions-center">
      <button class="p3-btn p3-btn-ghost" @click="addCourse">
        â• æ–°å¢èª²ç¨‹
      </button>
    </div>

    <!-- ğŸ“„ è¡¨æ ¼ -->
    <div class="p3-table-wrap">
      <table class="p3-table">
        <thead>
          <tr>
            <th>ç³»æ‰€</th>
            <th>èª²ç¨‹åç¨±</th>
            <th>äººæ•¸</th>
            <th>æ•™å¸«</th>
            <th>èª²åˆ¥</th>
            <th>å­¸åˆ†</th>
            <th>æ˜ŸæœŸ</th>
            <th>ç¯€æ¬¡</th>
            <th class="center">ä¿®æ”¹</th>
            <th class="center">åˆªé™¤</th>
          </tr>
        </thead>

        <tbody>
          <tr v-for="c in courses" :key="c.id">
            <td>{{ c.dept }}</td>
            <td class="strong">{{ c.name }}</td>
            <td>{{ c.people }}</td>
            <td>{{ c.teacher }}</td>
            <td>{{ c.category }}</td>
            <td>{{ c.credit }}</td>
            <td>{{ c.day }}</td>
            <td>{{ c.section }}</td>

            <td class="center action" @click="editCourse(c)">
              âœ
            </td>
            <td class="center action danger" @click="deleteCourse(c)">
              âŠ–
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- çµæœ -->
    <p class="p3-result">
      æŸ¥è©¢æˆåŠŸï¼Œå…± <b>{{ courses.length }}</b> ç­†
    </p>

  </div>
</template>

<script setup>
import { ref } from "vue";

/* ========= state ========= */
const searchText = ref("");

const courses = ref([
  {
    id: 1,
    dept: "è³‡ç®¡ç³»",
    name: "ä¸æƒ³ä¸Šèª²",
    people: 1000,
    teacher: "ï¼Ÿï¼Ÿï¼Ÿ",
    category: "é¸ä¿®",
    credit: 3,
    day: "ä¸€",
    section: "3-4",
  },
]);

/* ========= actions ========= */
function search() {
  // ğŸ”œ ä¹‹å¾Œæ”¹æˆï¼š
  // axios.get("/api/course", { params: { keyword: searchText.value } })

  console.log("search:", searchText.value);
}

function addCourse() {
  // ğŸ”œ å°é  or é–‹ Modal
  console.log("add course");
}

function editCourse(course) {
  // ğŸ”œ å°é  /course/edit/:id
  console.log("edit:", course);
}

function deleteCourse(course) {
  // ğŸ”œ é–‹ç¢ºèª Popup â†’ axios.delete
  console.log("delete:", course);
}
</script>

<style scoped>
/* ===== æœå°‹åˆ— ===== */
.p3-search-row {
  display: grid;
  grid-template-columns: 140px 1fr 120px;
  gap: 16px;
  align-items: center;
  margin-bottom: 20px;
}

.p3-search-label {
  font-size: 18px;
  font-weight: 900;
  letter-spacing: 0.08em;
}

/* ===== ä¸­å¤®æ“ä½œ ===== */
.p3-actions-center {
  text-align: center;
  margin-bottom: 18px;
}

/* ===== è¡¨æ ¼ ===== */
.p3-table-wrap {
  margin-top: 12px;
  background: rgba(12, 26, 44, 0.6);
  border-radius: 16px;
  overflow-x: auto;
}

.p3-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}

.p3-table th {
  padding: 12px;
  background: rgba(255,255,255,0.08);
  color: rgba(234,242,255,0.9);
  font-weight: 900;
  white-space: nowrap;
}

.p3-table td {
  padding: 12px;
  border-top: 1px solid rgba(255,255,255,0.06);
  white-space: nowrap;
}

.p3-table tbody tr:hover {
  background: rgba(47,230,255,0.08);
}

.strong {
  font-weight: 900;
}

.center {
  text-align: center;
}

/* ===== æ“ä½œ ===== */
.action {
  cursor: pointer;
  font-weight: 900;
  color: var(--p3-lime);
}

.action:hover {
  text-decoration: underline;
}

.danger {
  color: #ff6b6b;
}

/* ===== çµæœ ===== */
.p3-result {
  text-align: center;
  margin-top: 18px;
  font-size: 16px;
  opacity: 0.9;
}
</style>
